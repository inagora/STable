<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>STable Demo</title>
	<style>
	html,body,.doc,#wdStableContainer{
		margin: 0;
		padding: 0;
		height: 100%;
	}
	.doc{
		display: flex;
	}
	.title{
		width: 100px;
		background-color: #171F2C;
		writing-mode: tb;
		padding: 0;
		margin: 0;
		display: flex;
		justify-content: center;
		align-items: center;
		color: #fff;
		font-size: 48px;
	}
	#wdStableContainer{
		flex: 1;
	}
	.tip{
		color: rgba(0,0,0,0.1);
		display: flex;
		justify-content: center;
		align-items: center;
		font-size: 56px;
		width: 100%;
		height: 100%;
	}
	.poster{
		width: 100px;
		height: 100px;
		background-size: contain;
		background-position:center;
		background-repeat: no-repeat;
	}
	</style>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/element-ui@2.4.8/lib/theme-chalk/index.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="/resource/module/STable/STable.min.css">
</head>
<body>
	<div class="doc">
		<h1 class="title">STable DEV</h1>
		<div id="wdStableContainer">
			<div class="tip">STable Demo</div>
		</div>
	</div>
	<script src="https://cdn.jsdelivr.net/combine/npm/vue@2.5.17/dist/vue.min.js,npm/element-ui@2.4.8/lib/index.js"></script>
	<script src="/resource/module/STable/STable.min.js"></script>
	<script>
const type = ["剧情", "喜剧", "短片", "爱情", "纪录片", "动作", "惊悚", "恐怖", "动画", "犯罪", "冒险", "家庭", "悬疑", "奇幻", "科幻", "战争", "传记", "音乐", "历史", "歌舞", "西部", "运动", "古装", "武侠", "戏曲", "黑色电影", "儿童", "新闻", "真人秀", "舞台艺术", "成人", "脱口秀", "游戏秀", "情色", "文艺", "同性", "女性", "青春", "励志", "微电影", "灾难"];
var catData = [["217","个护化妆",[["220","基础护肤",[["426","面膜"],["423","面部清洁"],["422","化妆水"],["428","乳液"],["427","面霜"],["424","面部精华"],["430","眼霜眼膜"],["419","唇部护理"],["420","防晒"],["421","护肤套装"]]],["225","身体护理",[["452","口腔护理"],["459","女性护理"],["460","洗发"],["450","护发"],["449","染发发蜡"],["454","沐浴"],["455","润肤"],["457","手部护理"],["462","足部护理"],["453","纤体塑形"],["461","止汗用品"],["377","成人用品"]]],["400","个性美妆",[["470","彩妆套装"],["403","妆前隔离"],["402","底妆"],["415","遮瑕"],["406","唇妆"],["411","卸妆"],["407","眉笔/粉"],["413","眼线"],["414","眼影"],["404","睫毛膏"],["409","腮红"],["410","香水香氛"],["392","美瞳"]]],["221","美容工具",[["416","指甲护理"],["433","化妆棉"],["431","彩妆工具"],["438","美体塑形"],["437","美容仪器"],["432","美发工具"],["442","吸油纸"],["439","清洁用品"]]],["223","男士个护",[["444","男士洁面"],["443","面部护肤"],["448","剃须用品"],["447","身体护理"]]]]],["374","营养保健",[["375","功能养护",[["386","维生素"],["466","补肾壮阳"],["379","护肝养眼"],["467","营养补充"],["376","肠胃养护"],["384","免疫调节"],["510","清肺止咳"],["509","儿童养护"]]],["497","女性保养",[["381","青汁酵素"],["387","减肥瘦身"],["504","减肥食品"],["383","美容养颜"],["502","补血养气"],["505","内分泌"]]],["494","健康养护",[["273","口罩"],["391","眼药水"],["507","驱寒止痛"],["508","家中常备"],["506","蒸汽眼罩"],["389","暖宝宝"]]],["496","老人必备",[["499","三高调节"],["378","骨骼健康"],["388","心脑健康"]]]]],["312","日式美食",[["314","粮油副食",[["328","方便面"],["335","调味品"],["512","方便即食"],["471","果酱酱料"],["326","浓汤香粥"],["333","米面食材"],["331","早餐麦片"]]],["318","休闲零食",[["319","饼干糕点"],["350","糖果"],["347","薯条膨化"],["321","伴手礼"],["349","巧克力"],["346","海苔海味"],["345","果冻布丁"]]],["317","特色饮品",[["339","咖啡"],["337","茶"],["338","蜂蜜糖浆"],["340","功能饮料"]]]]],["235","家居生活",[["237","居家清洁",[["264","衣物清洁"],["266","卫浴用品"],["259","家居清洁"],["260","驱虫除臭"],["263","鞋护用品"]]],["238","生活日用",[["236","厨房餐饮"],["254","水杯水壶"],["280","纸品湿巾"],["281","家居用品"],["487","家纺收纳"]]],["239","文具",[["282","办公用品"],["285","本/便签"],["291","钢笔水笔"],["295","拍立得"]]]]],["353","服饰箱包",[["361","服饰内衣",[["368","裤袜丝袜"],["367","瘦腿袜"],["366","内衣文胸"],["363","男士内衣"],["469","女装"]]],["354","背包配饰",[["359","单肩包"],["360","双肩包"],["357","环保袋"],["373","饰品"],["480","眼镜"]]]]],["240","母婴儿童",[["241","喂养洗护",[["307","营养辅食"],["482","纸尿裤"],["300","洗漱护肤"],["299","奶瓶餐具"],["481","清洁洗衣"]]],["483","儿童生活",[["297","儿童用品"],["484","家纺卧具"],["305","婴儿服饰"],["303","儿童服饰"],["475","童鞋童袜"]]],["244","孕妈必备",[["311","孕妇装"],["309","哺乳装"],["308","孕妈用品"]]]]],["212","宠物生活",[["213","宠物用品",[["476","宠物零食"],["394","日常用品"]]]]]];
STable.init({
	id: 'demo',
	title: '一个标准的Demo',
	tip: '<div style="color:red">🍭Demo中所有数据来时光网，如有侵权，会立即删除</div>',
	url: '/demo/ajaxList',
	params: {
		count: 30,
		page: 5
	},
	rowNumberVisible: true,
	searchFilter: [
		{
			label: '名字',
			name: 'name'
		},
		{
			name: 'movieType',
			label: '影片类型',
			list: type,
			disabled: true
		},
		{
			label: '上映时间(起)',
			name: 'stime',
			type: 'datetime'
		},
		{
			label: '上映时间(终)',
			name: 'etime',
			type: 'hour'
		},
		{
			type: 'cascade',
			label: '分类',
			listData: catData,
			name: 'cat',
			width: 300
		}
	],
	ignoreEmptySearchParam: true,
	downloadable: true,
	toolbar: [
		{
			text: '买票',
			click(){
				console.log(this.getSelectedRows());
			}
		},
		{
			text: '下架电影',
			icon: 'close',
			type: 'danger',
			click(){
				console.log(this.getSelectedRows())
			}
		}
	],
	sortKey: 'id',
	sortDirection: 'desc',
	columns: [
		{
			header: 'id',
			dataIndex:'id',
			width: 100,
			locked: true,
			sortable: true
		},
		{
			header: '海报',
			dataIndex: 'img',
			width: 120,
			render(record){
				let img = record.img;
				return `<div class="poster" style="background-image:url(${img.replace(/_\d+X\d+(X2)?\.jpg/,'_640X360X2.jpg')})"></div>`;
			}
		},
		{
			header: '名字',
			dataIndex: 'name',
			width: 200,
			cellWrap: true
		},{
			header: '评分',
			dataIndex: 'rating',
			width: 100,
			fx: 'average',
			sortable: true
		},{
			header: '影片类型',
			dataIndex: 'movieType',
			width: 150
		},
		{
			header: '导演',
			dataIndex: 'directors',
			width: 150,
			render(record){
				return record.directors.join(' | ');
			}
		},{
			header: '主演',
			dataIndex: 'actors',
			cellWrap: true,
			width: 150,
			render(record){
				return record.actors.join(' | ');
			}
		},
		{
			header: '国家',
			dataIndex: 'locationName',
			width: 80
		},{
			header: '上映时间',
			dataIndex: 'year',
			width: 80
		},{
			header: '其它名字',
			width: 500,
			cellWrap: true,
			dataIndex: 'titleOthersCn',
			render(record){
				return record.titleOthersCn.join(' | ');
			}
		},{
			header: '操作',
			buttons: [
				{
					text: '显示',
					click(){}
				},{
					text: '隐藏',
					icon: 'plus',
					click(){}
				}
			]
		}
	],
	selectMode: 'multiple',
	listeners: {
		cellclick(record, col) {
			if(col.dataIndex=='img') {
				let img = record.img;
				Dialog.create({
					width: '90%',
					height: '90%',
					autoShow: true,
					html: `<a href="${img}" target="_blank"><div style="width:100%;height: 100%;background:url(${img}) no-repeat center;background-size:contain;"></div></a>`
				});
			}
		}
	},
});
	</script>
</body>
</html>