<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>STable Demo</title>
	<style>
	html,body,.doc,#wdStableContainer{
		margin: 0;
		padding: 0;
		height: 100%;
	}
	.doc{
		display: flex;
	}
	.title{
		width: 100px;
		background-color: #171F2C;
		writing-mode: tb;
		padding: 0;
		margin: 0;
		display: flex;
		justify-content: center;
		align-items: center;
		color: #fff;
		font-size: 48px;
	}
	#wdStableContainer{
		flex: 1;
	}
	.tip{
		color: rgba(0,0,0,0.1);
		display: flex;
		justify-content: center;
		align-items: center;
		font-size: 56px;
		width: 100%;
		height: 100%;
	}
	.poster{
		width: 100px;
		height: 100px;
		background-size: contain;
		background-position:center;
		background-repeat: no-repeat;
	}
	</style>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/element-ui@2.4.8/lib/theme-chalk/index.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="/resource/module/STable/STable.min.css">
</head>
<body>
	<div class="doc">
		<h1 class="title">STable DEV</h1>
		<div id="wdStableContainer">
			<div class="tip">STable Demo</div>
		</div>
	</div>
	<script src="https://cdn.jsdelivr.net/combine/npm/vue@2.5.17/dist/vue.min.js,npm/element-ui@2.4.8/lib/index.js"></script>
	<script src="/resource/module/STable/STable.min.js"></script>
	<script>
const type = ["å‰§æƒ…", "å–œå‰§", "çŸ­ç‰‡", "çˆ±æƒ…", "çºªå½•ç‰‡", "åŠ¨ä½œ", "æƒŠæ‚š", "ææ€–", "åŠ¨ç”»", "çŠ¯ç½ª", "å†’é™©", "å®¶åº­", "æ‚¬ç–‘", "å¥‡å¹»", "ç§‘å¹»", "æˆ˜äº‰", "ä¼ è®°", "éŸ³ä¹", "å†å²", "æ­Œèˆ", "è¥¿éƒ¨", "è¿åŠ¨", "å¤è£…", "æ­¦ä¾ ", "æˆæ›²", "é»‘è‰²ç”µå½±", "å„¿ç«¥", "æ–°é—»", "çœŸäººç§€", "èˆå°è‰ºæœ¯", "æˆäºº", "è„±å£ç§€", "æ¸¸æˆç§€", "æƒ…è‰²", "æ–‡è‰º", "åŒæ€§", "å¥³æ€§", "é’æ˜¥", "åŠ±å¿—", "å¾®ç”µå½±", "ç¾éš¾"];
var catData = [["217","ä¸ªæŠ¤åŒ–å¦†",[["220","åŸºç¡€æŠ¤è‚¤",[["426","é¢è†œ"],["423","é¢éƒ¨æ¸…æ´"],["422","åŒ–å¦†æ°´"],["428","ä¹³æ¶²"],["427","é¢éœœ"],["424","é¢éƒ¨ç²¾å"],["430","çœ¼éœœçœ¼è†œ"],["419","å”‡éƒ¨æŠ¤ç†"],["420","é˜²æ™’"],["421","æŠ¤è‚¤å¥—è£…"]]],["225","èº«ä½“æŠ¤ç†",[["452","å£è…”æŠ¤ç†"],["459","å¥³æ€§æŠ¤ç†"],["460","æ´—å‘"],["450","æŠ¤å‘"],["449","æŸ“å‘å‘èœ¡"],["454","æ²æµ´"],["455","æ¶¦è‚¤"],["457","æ‰‹éƒ¨æŠ¤ç†"],["462","è¶³éƒ¨æŠ¤ç†"],["453","çº¤ä½“å¡‘å½¢"],["461","æ­¢æ±—ç”¨å“"],["377","æˆäººç”¨å“"]]],["400","ä¸ªæ€§ç¾å¦†",[["470","å½©å¦†å¥—è£…"],["403","å¦†å‰éš”ç¦»"],["402","åº•å¦†"],["415","é®ç‘•"],["406","å”‡å¦†"],["411","å¸å¦†"],["407","çœ‰ç¬”/ç²‰"],["413","çœ¼çº¿"],["414","çœ¼å½±"],["404","ç«æ¯›è†"],["409","è…®çº¢"],["410","é¦™æ°´é¦™æ°›"],["392","ç¾ç³"]]],["221","ç¾å®¹å·¥å…·",[["416","æŒ‡ç”²æŠ¤ç†"],["433","åŒ–å¦†æ£‰"],["431","å½©å¦†å·¥å…·"],["438","ç¾ä½“å¡‘å½¢"],["437","ç¾å®¹ä»ªå™¨"],["432","ç¾å‘å·¥å…·"],["442","å¸æ²¹çº¸"],["439","æ¸…æ´ç”¨å“"]]],["223","ç”·å£«ä¸ªæŠ¤",[["444","ç”·å£«æ´é¢"],["443","é¢éƒ¨æŠ¤è‚¤"],["448","å‰ƒé¡»ç”¨å“"],["447","èº«ä½“æŠ¤ç†"]]]]],["374","è¥å…»ä¿å¥",[["375","åŠŸèƒ½å…»æŠ¤",[["386","ç»´ç”Ÿç´ "],["466","è¡¥è‚¾å£®é˜³"],["379","æŠ¤è‚å…»çœ¼"],["467","è¥å…»è¡¥å……"],["376","è‚ èƒƒå…»æŠ¤"],["384","å…ç–«è°ƒèŠ‚"],["510","æ¸…è‚ºæ­¢å’³"],["509","å„¿ç«¥å…»æŠ¤"]]],["497","å¥³æ€§ä¿å…»",[["381","é’æ±é…µç´ "],["387","å‡è‚¥ç˜¦èº«"],["504","å‡è‚¥é£Ÿå“"],["383","ç¾å®¹å…»é¢œ"],["502","è¡¥è¡€å…»æ°”"],["505","å†…åˆ†æ³Œ"]]],["494","å¥åº·å…»æŠ¤",[["273","å£ç½©"],["391","çœ¼è¯æ°´"],["507","é©±å¯’æ­¢ç—›"],["508","å®¶ä¸­å¸¸å¤‡"],["506","è’¸æ±½çœ¼ç½©"],["389","æš–å®å®"]]],["496","è€äººå¿…å¤‡",[["499","ä¸‰é«˜è°ƒèŠ‚"],["378","éª¨éª¼å¥åº·"],["388","å¿ƒè„‘å¥åº·"]]]]],["312","æ—¥å¼ç¾é£Ÿ",[["314","ç²®æ²¹å‰¯é£Ÿ",[["328","æ–¹ä¾¿é¢"],["335","è°ƒå‘³å“"],["512","æ–¹ä¾¿å³é£Ÿ"],["471","æœé…±é…±æ–™"],["326","æµ“æ±¤é¦™ç²¥"],["333","ç±³é¢é£Ÿæ"],["331","æ—©é¤éº¦ç‰‡"]]],["318","ä¼‘é—²é›¶é£Ÿ",[["319","é¥¼å¹²ç³•ç‚¹"],["350","ç³–æœ"],["347","è–¯æ¡è†¨åŒ–"],["321","ä¼´æ‰‹ç¤¼"],["349","å·§å…‹åŠ›"],["346","æµ·è‹”æµ·å‘³"],["345","æœå†»å¸ƒä¸"]]],["317","ç‰¹è‰²é¥®å“",[["339","å’–å•¡"],["337","èŒ¶"],["338","èœ‚èœœç³–æµ†"],["340","åŠŸèƒ½é¥®æ–™"]]]]],["235","å®¶å±…ç”Ÿæ´»",[["237","å±…å®¶æ¸…æ´",[["264","è¡£ç‰©æ¸…æ´"],["266","å«æµ´ç”¨å“"],["259","å®¶å±…æ¸…æ´"],["260","é©±è™«é™¤è‡­"],["263","é‹æŠ¤ç”¨å“"]]],["238","ç”Ÿæ´»æ—¥ç”¨",[["236","å¨æˆ¿é¤é¥®"],["254","æ°´æ¯æ°´å£¶"],["280","çº¸å“æ¹¿å·¾"],["281","å®¶å±…ç”¨å“"],["487","å®¶çººæ”¶çº³"]]],["239","æ–‡å…·",[["282","åŠå…¬ç”¨å“"],["285","æœ¬/ä¾¿ç­¾"],["291","é’¢ç¬”æ°´ç¬”"],["295","æ‹ç«‹å¾—"]]]]],["353","æœé¥°ç®±åŒ…",[["361","æœé¥°å†…è¡£",[["368","è£¤è¢œä¸è¢œ"],["367","ç˜¦è…¿è¢œ"],["366","å†…è¡£æ–‡èƒ¸"],["363","ç”·å£«å†…è¡£"],["469","å¥³è£…"]]],["354","èƒŒåŒ…é…é¥°",[["359","å•è‚©åŒ…"],["360","åŒè‚©åŒ…"],["357","ç¯ä¿è¢‹"],["373","é¥°å“"],["480","çœ¼é•œ"]]]]],["240","æ¯å©´å„¿ç«¥",[["241","å–‚å…»æ´—æŠ¤",[["307","è¥å…»è¾…é£Ÿ"],["482","çº¸å°¿è£¤"],["300","æ´—æ¼±æŠ¤è‚¤"],["299","å¥¶ç“¶é¤å…·"],["481","æ¸…æ´æ´—è¡£"]]],["483","å„¿ç«¥ç”Ÿæ´»",[["297","å„¿ç«¥ç”¨å“"],["484","å®¶çººå§å…·"],["305","å©´å„¿æœé¥°"],["303","å„¿ç«¥æœé¥°"],["475","ç«¥é‹ç«¥è¢œ"]]],["244","å­•å¦ˆå¿…å¤‡",[["311","å­•å¦‡è£…"],["309","å“ºä¹³è£…"],["308","å­•å¦ˆç”¨å“"]]]]],["212","å® ç‰©ç”Ÿæ´»",[["213","å® ç‰©ç”¨å“",[["476","å® ç‰©é›¶é£Ÿ"],["394","æ—¥å¸¸ç”¨å“"]]]]]];
STable.init({
	id: 'demo',
	title: 'ä¸€ä¸ªæ ‡å‡†çš„Demo',
	tip: '<div style="color:red">ğŸ­Demoä¸­æ‰€æœ‰æ•°æ®æ¥æ—¶å…‰ç½‘ï¼Œå¦‚æœ‰ä¾µæƒï¼Œä¼šç«‹å³åˆ é™¤</div>',
	url: '/demo/ajaxList',
	params: {
		count: 30,
		page: 5
	},
	rowNumberVisible: true,
	searchFilter: [
		{
			label: 'åå­—',
			name: 'name'
		},
		{
			name: 'movieType',
			label: 'å½±ç‰‡ç±»å‹',
			list: type,
			disabled: true
		},
		{
			label: 'ä¸Šæ˜ æ—¶é—´(èµ·)',
			name: 'stime',
			type: 'datetime'
		},
		{
			label: 'ä¸Šæ˜ æ—¶é—´(ç»ˆ)',
			name: 'etime',
			type: 'hour'
		},
		{
			type: 'cascade',
			label: 'åˆ†ç±»',
			listData: catData,
			name: 'cat',
			width: 300
		}
	],
	ignoreEmptySearchParam: true,
	downloadable: true,
	toolbar: [
		{
			text: 'ä¹°ç¥¨',
			click(){
				console.log(this.getSelectedRows());
			}
		},
		{
			text: 'ä¸‹æ¶ç”µå½±',
			icon: 'close',
			type: 'danger',
			click(){
				console.log(this.getSelectedRows())
			}
		}
	],
	sortKey: 'id',
	sortDirection: 'desc',
	columns: [
		{
			header: 'id',
			dataIndex:'id',
			width: 100,
			locked: true,
			sortable: true
		},
		{
			header: 'æµ·æŠ¥',
			dataIndex: 'img',
			width: 120,
			render(record){
				let img = record.img;
				return `<div class="poster" style="background-image:url(${img.replace(/_\d+X\d+(X2)?\.jpg/,'_640X360X2.jpg')})"></div>`;
			}
		},
		{
			header: 'åå­—',
			dataIndex: 'name',
			width: 200,
			cellWrap: true
		},{
			header: 'è¯„åˆ†',
			dataIndex: 'rating',
			width: 100,
			fx: 'average',
			sortable: true
		},{
			header: 'å½±ç‰‡ç±»å‹',
			dataIndex: 'movieType',
			width: 150
		},
		{
			header: 'å¯¼æ¼”',
			dataIndex: 'directors',
			width: 150,
			render(record){
				return record.directors.join(' | ');
			}
		},{
			header: 'ä¸»æ¼”',
			dataIndex: 'actors',
			cellWrap: true,
			width: 150,
			render(record){
				return record.actors.join(' | ');
			}
		},
		{
			header: 'å›½å®¶',
			dataIndex: 'locationName',
			width: 80
		},{
			header: 'ä¸Šæ˜ æ—¶é—´',
			dataIndex: 'year',
			width: 80
		},{
			header: 'å…¶å®ƒåå­—',
			width: 500,
			cellWrap: true,
			dataIndex: 'titleOthersCn',
			render(record){
				return record.titleOthersCn.join(' | ');
			}
		},{
			header: 'æ“ä½œ',
			buttons: [
				{
					text: 'æ˜¾ç¤º',
					click(){}
				},{
					text: 'éšè—',
					icon: 'plus',
					click(){}
				}
			]
		}
	],
	selectMode: 'multiple',
	listeners: {
		cellclick(record, col) {
			if(col.dataIndex=='img') {
				let img = record.img;
				Dialog.create({
					width: '90%',
					height: '90%',
					autoShow: true,
					html: `<a href="${img}" target="_blank"><div style="width:100%;height: 100%;background:url(${img}) no-repeat center;background-size:contain;"></div></a>`
				});
			}
		}
	},
});
	</script>
</body>
</html>